<side-navbar></side-navbar>
<div id="upload" class="container-fluid">
    <div class="row">
        <form name="Book">
            <div class="col-md-9">
                <br/>
                <div class="col-md-12">
                    <h3>Edit this book</h3>
                    <hr/>
                </div>
                <br/>
                <div class="col-md-12">
                    <h4>Book Title</h4>
                    <input class="form-control" ng-model="edit.name" type="text" placeholder="Book name" maxlength="500"
                           ng-disabled="edit.uploading">
                    <br/>
                </div>
                <div class="col-md-6">
                    <h4>Cover image</h4>
                    <div class="uploadImg" type="file"
                         ngf-select="edit.uploadPhoto(photo)" ngf-drop="edit.uploadPhoto(photo)"
                         ng-model="photo"
                         name="img" ngf-max-size="2MB" accept="image/*"
                         ngf-pattern="'.png,.jpg,.jpeg,.JPEG'"
                         ngf-model-invalid="errorFile" ng-required ng-disabled="edit.uploading">
                        <div class="text-center">
                            <img src="assets/images/upload.svg"/>
                            <h4 class="placeholder">Drag your cover image here or click for uploading
                                image.</h4>
                        </div>
                    </div>
                    <div class="uploaded-photo">
                        <br/>
                        <div class="thumb">
                            <div ng-if="edit.existPhoto">
                                <h4>Existing cover image:</h4>
                                <img class="cover" ngf-src="edit.existPhoto" class="thumb-img">
                            </div>
                            <div ng-if="!edit.existPhoto">
                                <h4>New cover image:</h4>
                                <img class="cover" ngf-src="edit.photo" class="thumb-img"><br/>
                                <span>{{ edit.photo.name | limitTo: 20 }}{{edit.photo.name.length > 20 ? '...' : ''}}</span>
                            </div>
                        </div>
                        <h4 class="centered file_error" ng-show="Book.img.$error.pattern">
                            You can upload only jpg, <br> jpeg, png files!
                        </h4>
                        <h4 class="file_error" ng-show="Book.img.$error.maxSize">
                            {{errorFile.name}} is too large ({{errorFile.size / 1000000|number:1}}mb):
                            <br> max size
                            is
                            2mb.
                        </h4>

                        <h4 class="file_error">
                            {{edit.uploadError}}
                        </h4>
                    </div>
                </div>
                <div class="col-md-6">
                    <h4>PDF File</h4>
                    <div class="uploadImg" type="file"
                         ngf-select="edit.uploadFile(file)" ngf-drop="edit.uploadFile(file)"
                         ng-model="file"
                         name="file" ngf-max-size="50MB" accept="application/pdf"
                         ngf-pattern="'.pdf'"
                         ngf-model-invalid="errorFile" ng-required ng-disabled="edit.uploading">
                        <div class="text-center">
                            <img src="assets/images/upload.svg"/>
                            <h4 class="placeholder">Drag your file here or click for uploading
                                book.</h4>
                        </div>
                    </div>
                    <div class="uploaded-photo">
                        <br/>
                        <div class="thumb">
                            <div ng-if="edit.existFile">
                                <h4>Existing file url:</h4>
                                <a target="_blank" ng-href="{{edit.existFile}}">{{edit.existFile | limitTo:
                                    60}}{{edit.existFile.length > 60 ? '...' : ''}}</a>
                            </div>
                            <div ng-if="!edit.existFile">
                                <h4>New file:</h4>
                                <span>{{ edit.file.name | limitTo: 40 }}{{edit.file.name.length > 40 ? '...' : ''}}</span>
                            </div>
                        </div>
                        <h4 class="centered file_error" ng-show="Book.file.$error.pattern">
                            You can upload only pdf file!
                        </h4>
                        <h4 class="file_error" ng-show="Book.file.$error.maxSize">
                            {{errorFile.name}} is too large ({{errorFile.size / 1000000|number:1}}mb):
                            <br> max size
                            is
                            50mb.
                        </h4>

                        <h4 class="file_error">
                            {{edit.uploadError}}
                        </h4>
                    </div>
                </div>

            </div>
            <div class="col-md-9  pull-right">
                <div class="col-md-12">
                    <br/>
                    <button class="btn btn-default btn-lg" ng-click="edit.editBook(edit.name, edit.file, edit.photo)"
                            ng-disabled="!edit.name || edit.uploading">Edit this book
                        <img ng-show="edit.uploading" src="assets/images/uploading.gif">
                    </button>
                    <br/>
                    <br/>
                    <br/>
                </div>
            </div>
        </form>
    </div>
</div>